version: '3.8'

services:
  vapi:
    build:
      context: ./vapi
    container_name: vapi
    environment:
      VAPI_PORT: 9000
    ports:
      - "9000:9000"           
    networks:
      - vapi_net
    restart: unless-stopped

  gateway:
    build:
      context: ./gateway
    container_name: gateway
    environment:
      VAPI_HOST: vapi         
      VAPI_PORT: 9000         
    depends_on:
      - vapi
    networks:
      - vapi_net
    entrypoint: ./gateway     
    tty: true
    stdin_open: true

networks:
  vapi_net:
    driver: bridge
